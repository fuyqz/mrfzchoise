"use strict";(self["webpackChunkvue_001"]=self["webpackChunkvue_001"]||[]).push([[310],{3310:function(t,e,l){l.r(e),l.d(e,{default:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"topTag"},[e("el-tag",{staticClass:"nameTag",attrs:{type:"success"}},[t._v("斌斌")]),e("el-button",{staticClass:"btnTag",on:{click:t.clearFilter}},[t._v("清除全部")])],1),e("div",[e("el-table",{ref:"filterTable",staticStyle:{width:"80%"},attrs:{data:t.last,stripe:"",height:"500"}},[e("el-table-column",{attrs:{prop:"pool",label:"卡池",filters:t.poolList,"filter-method":t.filterHandler,width:"200"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-tag",{attrs:{type:l.row.tag%2===0?"info":"warning","disable-transitions":""}},[t._v(t._s(l.row.pool))])]}}])}),e("el-table-column",{attrs:{prop:"charName",label:"名字",width:"170"}}),e("el-table-column",{attrs:{prop:"rarity",label:"星级",width:"180",filters:t.rarityList,"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-tag",{attrs:{type:"5"===l.row.rarity?"success":"danger","disable-transitions":""}},[t._v(t._s(l.row.rarity))])]}}])}),e("el-table-column",{attrs:{prop:"takeOut",label:"抽数"}}),e("el-table-column",{attrs:{prop:"index6",label:"该池已垫"}})],1)],1)])},s=[],i=(l(7658),l(6972)),r={data(){return{page:1,cardList:[],url:i.Z.data.binUrl,cardName:[],last:[],rarityList:[{text:"5",value:"5"},{text:"6",value:"6"}],poolList:[]}},methods:{clearFilter(){this.$refs.filterTable.clearFilter()},get(){let t=this;for(let e=1;e<11;e++)this.axios.get("/api?page="+e+this.url).then((function(e){if(e.data.data.list.length>0){let l=e.data.data;t.cardList[l.pagination.current-1]=l.list}}),(function(t){console.log("err",t)}));console.log("完成了get调用!"),setTimeout((()=>{this.fenxi(),console.log("完成了fenxi调用!")}),1500),clearTimeout()},fenxi(){this.cardList=[].concat(...this.cardList);let t=[];for(let l in this.cardList)if(10==this.cardList[l].chars.length)for(let e=0;e<10;e++)t.push({ts:this.cardList[l].ts,pool:this.cardList[l].pool,chars:[this.cardList[l].chars[e]]});else t.push({ts:this.cardList[l].ts,pool:this.cardList[l].pool,chars:[this.cardList[l].chars[0]]});t=t.reverse();t[t.length-1].ts;let e=[...new Set(t.map((t=>t.pool)))];this.poolList=e.map((t=>({text:t,value:t}))),t=e.map((e=>t.filter((t=>t.pool==e)))).map((t=>t.map((t=>t.chars))));for(let l=0;l<t.length;l++){let e=0,a=0,s=[],i=[];for(let r=0;r<t[l].length;r++)4==t[l][r][0].rarity?(e+=1,s.push(t[l][r][0]["name"]+","+e),a++,e=0):5==t[l][r][0].rarity?(a+=1,i.push(t[l][r][0]["name"]+","+a),e++,a=0):(e++,a++);s.map((t=>{this.last.push({pool:this.poolList[l].text,charName:t.split(",")[0],takeOut:t.split(",")[1],rarity:"5",tag:l})})),i.map((t=>{this.last.push({pool:this.poolList[l].text,charName:t.split(",")[0],takeOut:t.split(",")[1],rarity:"6",tag:l})})),this.last[this.last.length-1].index6=a,i=[],console.log(this.last)}console.log("完成了!")},filterHandler(t,e,l){const a=l["property"];return e[a]===t}},mounted(){this.get(),console.log(this.last)}},o=r,n=l(1001),c=(0,n.Z)(o,a,s,!1,null,null,null),p=c.exports},6972:function(t,e){e["Z"]={data:{myUrl:"&token=K76AmPxYkkhmWbkRMk588rN4bqoGkxSjCo3jcRhQHa4HV3crKKRwiQOdu%2FxjvrerWsE%2FqyBFLBfXGMgqTkj5MCFJXJN%2ByjmdMRxiPuOBx5VYI2p4BOIoDUzQaxa%2FsqiWzbK3%2B3yAY4ktTbQjb7zVBudYW73dE%2FBmxJoiP2T9irWCF14KINYRiiu6PV51Z4RjdLvoosHo0UKb&channelId=2",smUrl:"&token=Gs2PllmrPkGWaRbK7UN2GUGv39%2B1JHQrEW3%2F4TCeAofX4gJGXgnxxKddCuM%2BQd8Sdprq8DF5p7QcPZpmoUFPUy7eY8A5v1G4SdMo%2Fzwyt5b5A9F1jW1QX4dzBDgV%2FwRCfU1X%2BzzWUUC3xrUgdw1dYFlGnrA4rBPyWkyLFBfutv1RA%2BNWnmI3stmTf1i1jA57lDquunKstACF&channelId=2",dogUrl:"&token=quLg2iBp%2Bl6oUuhnzOCpUxLOo3P3F8HpuH82fhhR4vS0KhOef6XG58xCy19R56EYN3iiawg1xfxdWeiMYWGgL4D9PM%2FqDwIhuGnnZkLc5TiKpLD99s1bd6vpzZmFZkl6J3aZmf6MUbdFmK64sGu9zvPbI0IKP0e7W1gEJfXCP5lm%2B7n84cppT3Bgc5MtWG38YIOHFRVPT5iQ&channelId=2",binUrl:"&token=itwvM1uLq8vkYk2p0Z3ucZIwkEoy1fmoUFpH5GUCfkZaUoeFwMg5HZ4mKVYuPcQeE%2BBpCFPAINc2HzHlvnU5xa%2BwnR9WvY1x2RxlnyjkkR4E%2FMi7dEgODkf8IYtiUGVZ6IW8CN0fbUgYrq7gw6yviaTeyHaWr4rpOsBJZQqWBZ866yZ4k57zKYKQ%2BOUQhMkz4VomDzoXVwRE&channelId=2"}}}}]);
//# sourceMappingURL=310.ab77d0d7.js.map